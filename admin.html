<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cricscanner Admin</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['"Inter"', 'system-ui', 'sans-serif'],
            },
            boxShadow: {
              glow: '0 0 40px -10px rgba(34, 211, 238, 0.45)',
            },
          },
        },
      };
    </script>

    <!-- Luxon for time/date -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
  </head>

  <body class="bg-gradient-to-br from-slate-950 via-slate-950 to-blue-950 text-slate-100 min-h-screen">
    <!-- HEADER -->
    <header class="border-b border-slate-800/60 bg-slate-950/70 backdrop-blur">
      <div class="mx-auto flex max-w-6xl flex-col gap-4 px-6 py-10 sm:flex-row sm:items-center sm:justify-between">
        <div>
          <p class="text-xs uppercase tracking-[0.35em] text-emerald-200/80">Cricscanner Control Room</p>
          <h1 class="mt-2 text-4xl font-bold text-white">Admin Dashboard</h1>
          <p class="mt-3 max-w-2xl text-sm text-slate-300">
            Manage tournaments and matches. All times are stored and interpreted in Eastern Time (ET).
            Updates reflect instantly across the public dashboard.
          </p>
        </div>
        <a href="index.html" class="text-sm font-semibold text-emerald-300 transition hover:text-emerald-200">← Back to dashboard</a>
      </div>
    </header>

    <!-- MAIN (unchanged content from your current admin.html) -->
    <main class="mx-auto max-w-6xl px-6 py-12">
      <!-- Keep your Tournaments and Matches sections here exactly as-is -->
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-slate-800/60 bg-slate-950/70">
      <div class="mx-auto max-w-6xl px-6 py-6 text-center text-sm text-slate-500">
        Built with TailwindCSS + Luxon • Auto-updated dashboard
      </div>
    </footer>

    <!-- ✅ STORAGE SCRIPT -->
    <script src="js/storage.js"></script>

    <!-- ✅ ADMIN SCRIPT -->
    <script>
      const { DateTime } = luxon;

      /** Wait until storage.js is ready before using getData */
      function waitForStorageAndRender() {
        if (!window.CricStorage || typeof window.CricStorage.getData !== "function") {
          console.warn("⚠️ Waiting for storage.js to load...");
          setTimeout(waitForStorageAndRender, 400);
          return;
        }
        console.log("✅ storage.js ready — initializing admin panel");
        initializeAdmin();
      }

      function initializeAdmin() {
        const {
          getData,
          upsertTournament,
          deleteTournament,
          upsertMatch,
          deleteMatch,
          generateId,
        } = window.CricStorage;

        function loadState() {
          return getData();
        }

        /** All your render, populate, event listener, and form logic */
        // Paste your previous JS logic here (renderAll, populateTournamentSelect, etc.)
        // Leave everything else unchanged.

        // At the end:
        renderAll();
      }

      document.addEventListener("DOMContentLoaded", waitForStorageAndRender);
    </script>
  </body>
</html>
