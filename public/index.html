<script>
  document.addEventListener("DOMContentLoaded", () => {
    const matchesContainer = document.getElementById("matches");
    const tournamentsContainer = document.getElementById("tournaments");
    const tabButtons = document.querySelectorAll(".tab-btn");

    // âœ… Load data from localStorage
    const matches = JSON.parse(localStorage.getItem("cricscanner_matches") || "[]");
    const tournaments = JSON.parse(localStorage.getItem("cricscanner_tournaments") || "[]");

    // ðŸ† Render Tournaments
    tournamentsContainer.innerHTML =
      tournaments.length > 0
        ? tournaments
            .slice(0, 6)
            .map(
              (t) => `
          <div class="px-6 py-3 bg-slate-800 rounded-full text-white text-lg font-semibold">
            ${t.name || "Unknown Tournament"}
          </div>`
            )
            .join("")
        : `<p class="text-slate-500">No tournaments available right now.</p>`;

    // ðŸ§  Render Matches
    function renderMatches(status = "Live") {
      let filtered = matches.filter((m) => {
        if (!status || status === "Live") return m.status?.toLowerCase().includes("live");
        if (status === "Upcoming") return m.status?.toLowerCase().includes("upcoming");
        if (status === "Completed" || status === "Recent") return m.status?.toLowerCase().includes("complete");
        return true;
      });

      // ðŸ§© Show top 6 matches
      const featuredMatches = filtered.slice(0, 6);

      matchesContainer.innerHTML =
        featuredMatches.length > 0
          ? featuredMatches
              .map(
                (m) => `
            <div class="p-5 bg-slate-900 border border-slate-800 rounded-2xl hover:shadow-glow transition">
              <h3 class="text-xl font-bold text-white">
                ${m.teamInfo?.[0]?.name || m.teamA || "Team A"} 
                vs 
                ${m.teamInfo?.[1]?.name || m.teamB || "Team B"}
              </h3>
              <p class="text-slate-400 text-sm mt-1">${m.status || "Match info unavailable"}</p>
              <p class="text-slate-500 text-xs mt-1">${m.venue?.name || ""}</p>
            </div>`
              )
              .join("")
          : `<p class="text-slate-500">No ${status.toLowerCase()} matches right now.</p>`;
    }

    // ðŸŸ¢ Default tab load
    renderMatches("Live");

    // ðŸŸ£ Tab switching
    tabButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        tabButtons.forEach((b) => b.classList.remove("bg-emerald-500", "text-slate-900"));
        btn.classList.add("bg-emerald-500", "text-slate-900");
        renderMatches(btn.dataset.status);
      });
    });
  });
</script>

<!-- Keep auto-updater active -->
<script src="/public/js/auto-updater.js"></script>
